{% extends 'base.html' %}

{% block content %}
<div class="max-w-4xl mx-auto bg-white rounded-lg shadow-md overflow-hidden">
    {% if news.thumbnail %}
    <img src="{{ news.thumbnail }}" alt="{{ news.judul }}" class="w-full h-96 object-cover">
    {% endif %}
    <div class="p-6">
        <h1 class="text-4xl font-bold text-gray-800 mb-2">{{ news.judul }}</h1>
        <p class="text-sm text-gray-500 mb-4">By {{ news.penulis.username }} on {{ news.tanggal_dibuat|date:"F d, Y" }}</p>
        <div class="prose max-w-none text-gray-700">
            {{ news.konten|safe }}
        </div>
        <hr class="my-6">
        <div class="flex justify-between items-center">
            <div>
                <p class="text-gray-600"><strong>Category:</strong> {{ news.kategori.nama }}</p>
                <p class="text-gray-600"><strong>Source:</strong> {{ news.sumber }}</p>
                <p class="text-gray-600"><strong>Views:</strong> {{ news.views }}</p>
            </div>
            {% if user.is_staff %}
            <div class="flex space-x-4">
                <a href="{% url 'portal_berita:update_news' news.id %}" class="bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded">Edit</a>
                <form action="{% url 'portal_berita:delete_news' news.id %}" method="post" id="delete-form">
                    {% csrf_token %}
                    <button type="button" id="delete-btn" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">Delete</button>
                </form>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<script>
document.getElementById('delete-btn').addEventListener('click', function() {
    if (confirm('Are you sure you want to delete this news?')) {
        document.getElementById('delete-form').submit();
    }
});
</script>
{% endblock %}
